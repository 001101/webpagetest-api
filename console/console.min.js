(function(){var k={common:{server:{name:"server",key:"s",param:"server",info:"the WPT server URL [www.webpagetest.org]"},dryrun:{name:"dryRun",key:"d",bool:true,info:"just return the RESTful API URL"}},test:{key:{name:"key",key:"k",api:"k",param:"api_key",info:"API key (if assigned). Contact the WebPageTest server administrator for a key if required"},location:{name:"location",key:"l",api:"location",param:"location",info:"location to test from"},runs:{name:"runs",key:"r",api:"runs",param:"number",info:"number of test runs [1]"},first:{name:"firstViewOnly",key:"f",api:"fvonly",bool:true,info:"skip the Repeat View test"},label:{name:"label",key:"L",api:"label",param:"label",info:"label for the test"},"private":{name:"private",key:"p",api:"private",bool:true,info:"keep the test hidden from the test log"},video:{name:"video",key:"v",api:"video",bool:true,info:"capture video"},connectivity:{name:"connectivity",key:"y",api:"connectivity",param:"profile",info:"connectivity profile (DSL|FIOS|Dial|custom) [DSL]"},dom:{name:"domElement",key:"m",api:"domelement",param:"element",info:"DOM element to record for sub-measurement"},connections:{name:"connections",key:"c",api:"connections",param:"number",info:"override the number of concurrent connections"},onload:{name:"stopAtDocumentComplete",key:"i",api:"web10",bool:true,info:"force the test to stop at window.onload"},sensitive:{name:"sensitive",key:"t",api:"sensitive",bool:true,info:"discard script and http headers in the result"},block:{name:"block",key:"b",api:"block",param:"urls",array:true,info:"space-delimited list of urls to block (substring match)"},login:{name:"login",key:"g",api:"login",param:"username",info:"username for authenticating tests (http authentication)"},password:{name:"password",key:"w",api:"password",param:"password",info:"password for authenticating tests (http authentication)"},authtype:{name:"authenticationType",key:"a",api:"authType",param:"type",info:"type of authentication: 0 = Basic, 1 = SNS [0]"},request:{name:"requestId",key:"e",api:"r",param:"id",info:"echo request ID, useful to track asynchronous requests"},notify:{name:"notifyEmail",key:"n",api:"notify",param:"e-mail",info:"e-mail address to notify with the test results"},pingback:{name:"pingback",key:"B",api:"pingback",param:"url",info:'URL to ping when the test is complete (the test ID will be passed as an "id" parameter)'},bwdown:{name:"bandwidthDown",key:"D",api:"bwDown",param:"bandwidth",info:"download bandwidth in Kbps (used when specifying a custom connectivity profile)"},bwup:{name:"bandwidthUp",key:"U",api:"bwUp",param:"bandwidth",info:"upload bandwidth in Kbps (used when specifying a custom connectivity profile)"},latency:{name:"latency",key:"Y",api:"latency",param:"time",info:"first-hop Round Trip Time in ms (used when specifying a custom connectivity profile)"},plr:{name:"packetLossRate",key:"P",api:"plr",param:"percentage",info:"packet loss rate - percent of packets to drop (used when specifying a custom connectivity profile)"},tcpdump:{name:"tcpDump",key:"u",api:"tcpdump",bool:true,info:"enable tcpdump capture"},noopt:{name:"disableOptimization",key:"z",api:"noopt",bool:true,info:"disable optimization checks (for faster testing)"},noimages:{name:"disableScreenshot",key:"I",api:"noimages",bool:true,info:"disable screen shot capturing"},noheaders:{name:"disableHTTPHeaders",key:"H",api:"noheaders",bool:true,info:"disable saving of the http headers (as well as browser status messages and CPU utilization)"},full:{name:"fullResolutionScreenshot",key:"F",api:"pngss",bool:true,info:"save a full-resolution version of the fully loaded screen shot as a PNG"},jpeg:{name:"jpegQuality",key:"j",api:"iq",param:"level",info:"jpeg compression level (30-100) for the screen shots and video capture"},noscript:{name:"disableJavaScript",key:"S",api:"noscript",bool:true,info:"disable javascript (IE, Chrome, Firefox)"},ignoressl:{name:"ignoreSSL",key:"R",api:"ignoreSSL",bool:true,info:"ignore SSL certificate errors, e.g. name mismatch, self-signed certificates, etc"},standards:{name:"disableCompatibilityView",key:"T",api:"standards",bool:true,info:"forces all pages to load in standards mode (IE only)"},bodies:{name:"saveResponseBodies",key:"O",api:"bodies",bool:true,info:"save response bodies for text resources"},keepua:{name:"keepOriginalUserAgent",key:"K",api:"keepua",bool:true,info:"do not add PTST to the original browser User Agent string"},duration:{name:"minimumDuration",key:"N",api:"time",param:"seconds",info:"minimum test duration in seconds"},noads:{name:"blockAds",key:"A",api:"blockads",bool:true,info:"block ads defined by adblockrules.org"},aft:{name:"aftRenderingTime",key:"E",api:"aft",bool:true,info:"(experimental) measure above-the-fold rendering time"},spof:{name:"spof",key:"Z",api:"spof",param:"domains",array:true,info:"space-delimited list of domains to simulate failure by re-routing to blackhole.webpagetest.org to silently drop all requests"},mobile:{name:"emulateMobile",key:"W",api:"mobile",bool:true,info:"(experimental) emulate mobile browser: Chrome mobile user agent, 640x960 screen, 2x scaling and fixed viewport (Chrome only)"},timeline:{name:"timeline",key:"M",api:"timeline",bool:true,info:"capture Developer Tools Timeline (Chrome only)"},netlog:{name:"netLog",key:"G",api:"netlog",bool:true,info:"capture Network Log (Chrome only)"},spdy3:{name:"forceSpdy3",key:"C",api:"spdy3",bool:true,info:"force SPDY version 3 (Chrome only)"},swrender:{name:"forceSoftwareRendering",key:"J",api:"swrender",bool:true,info:"force software rendering, disable GPU acceleration (Chrome only)"},noparser:{name:"disableThreadedParser",key:"Q",api:"disableThreadedParser",bool:true,info:"disable threaded HTML parser (Chrome only)"}},run:{run:{name:"run",key:"r",param:"number",info:"which run number on a multiple runs test [1]"},cached:{name:"repeatView",key:"c",bool:true,info:"get the Repeat View (cached view) instead of default First View (primed cache)"}},image:{thumbnail:{name:"thumbnail",key:"t",bool:true,info:"get the thumbnail of actual image"},uri:{name:"dataURI",key:"u",bool:true,info:"return the base64 string representation (inline) of actual image"}},screenshot:{full:{name:"fullResolution",key:"f",bool:true,info:"get full resolution screenshot in PNG format if available"},render:{name:"startRender",key:"n",bool:true,info:"get the page screenshot at the Start Render point (i.e.: when something was first displayed on screen)"},complete:{name:"documentComplete",key:"p",bool:true,info:"get the page screenshot at the Document Complete point (i.e.: when window.onload was fired)"}},results:{median:{name:"medianMetric",key:"m",param:"metric",info:"set the metric used to calculate median for multiple runs tests [loadtTime]"}},waterfall:{type:{name:"chartType",api:"type",key:"T",param:"chart",info:"set the chart type: waterfall or connection [waterfall]"},mime:{name:"colorByMime",api:"mime",key:"M",bool:true,info:"set chart coloring by MIME type [false]"},width:{name:"chartWidth",api:"width",key:"w",param:"px",info:"chart image width in px (300-2000) [930]"},max:{name:"maxTime",api:"max",key:"m",param:"seconds",info:"set maximum time in seconds [automatic]"},requests:{name:"requests",key:"R",param:"items",info:"filter requests (e.g.:1,2,3,4-9,8) [all]"},nocpu:{name:"noCPU",api:"cpu",key:"C",bool:true,invert:true,info:"hide CPU utilization [false]"},nobandwidth:{name:"noBandwidth",api:"bw",key:"b",bool:true,invert:true,info:"hide bandwidth utilization [false]"},noellipsis:{name:"noEllipsis",api:"dots",key:"e",bool:true,invert:true,info:"hide ellipsis (...) for missing items [false]"},nolabels:{name:"noLabels",api:"labels",key:"l",bool:true,invert:true,info:"hide labels for requests (URL) [false]"}}},a={status:{name:"getTestStatus",param:"id",info:"check test status"},results:{name:"getTestResults",param:"id",options:["results"],info:"get test results"},locations:{name:"getLocations",info:"list locations and the number of pending tests"},testers:{name:"getTesters",info:"list testers status and details"},test:{name:"runTest",param:"url_or_script",options:["test"],info:"run test"},cancel:{name:"cancelTest",param:"id",info:"cancel running/pending test"},har:{name:"getHARData",param:"id",info:"get the HTTPS Archive (HAR) from test"},pagespeed:{name:"getPageSpeedData",param:"id",options:["run"],info:"get the Google Page Speed results (if available) from test"},utilization:{name:"getUtilizationData",param:"id",options:["run"],info:"get the CPU, bandwidth and memory utilization data from test"},request:{name:"getRequestData",param:"id",options:["run"],info:"get the request data from test"},timeline:{name:"getTimelineData",param:"id",options:["run"],info:"get the Chrome Developer Tools Timeline data (if available) from test"},netlog:{name:"getNetLogData",param:"id",options:["run"],info:"get the Chrome Developer Tools Net log data (if available) from test"},console:{name:"getConsoleLogData",param:"id",options:["run"],info:"get the browser console log data (if available) from test"},testinfo:{name:"getTestInfo",param:"id",info:"get test request info/details"},waterfall:{name:"getWaterfallImage",param:"id",options:["run","image","waterfall"],info:"get the waterfall PNG image"},screenshot:{name:"getScreenshotImage",param:"id",options:["run","image","screenshot"],info:"get the fully loaded page screenshot in JPG format (PNG if in full resolution)"}},g="http://webpagetest.aws.af.cm";function f(){var l={};$('.options.active input:text[value!=""]').each(function(n,o){var m=$(o);l[m.attr("data-key")]=m.val()});$(".options.active input:checked").each(function(m,n){l[$(n).val()]=true});if(Object.keys(l).length>0){return l}}function c(o,n,m,q){var l=[g,"/",o,n!==undefined?"/"+n:"","?callback=?",m?"&"+$.param(m):""].join(""),p=["waterfall","screenshot"].indexOf(o)>-1;m=m||{};p=p&&!m.uri;if(!m.dryrun&&p){q(true,l)}else{$.ajax({url:l,dataType:"jsonp",success:q.bind(null,false)})}}function j(){var m,p,n=["var WebPageTest = require('webpagetest');","","var wpt = new WebPageTest('www.webpagetest.org', 'your_API_key');","","wpt.{method}({param}{options}function callback(err, data{info}) {","  console.log(err || data);","});"].join("\n"),o=a[$("#commands").val()];if(!o){return}m=f();if(m){p={};Object.keys(m).forEach(function l(q){["common"].concat(o.options).forEach(function r(s){if(s&&k[s][q]){p[k[s][q].name]=m[q]}})})}n=n.replace("{method}",o.name).replace("{param}",o.param?"'"+$("#param").val()+"', ":"").replace("{options}",p?JSON.stringify(p)+", ":"").replace("{info}",o.name.indexOf("Image")>-1?", info":"");$("#module").text(n)}function b(){var o,n=[],p="$ webpagetest {command}{param}{options}",m=$("#commands").val(),q=a[m];if(!q){return}o=f();if(o){Object.keys(o).forEach(function l(r){n.push("--"+r);if(typeof o[r]!=="boolean"){n.push(o[r])}})}p=p.replace("{command}",m).replace("{param}",q.param?" "+$("#param").val():"").replace("{options}",o?" "+n.join(" "):"");$("#command-line").text(p)}function d(){var o,m,l=$("#commands").val(),n=a[l];if(!n){return}if(n.param){o=$("#param").val()||n.param}m=f()||{};m.dryrun=true;c(l,o,m,function(q,p){$("#url").text(p.url)})}function e(){var p,m,n,l=$("#commands").val(),o=a[l];if(!o){return}if(o.param){p=$("#param").val()||o.param;if(l==="test"){p=encodeURIComponent(p)}}n=f();m=[g,"/",l,p!==undefined?"/"+p:"",n?"?"+$.param(n):""].join("");$("#proxy").text(m)}function i(){j();b();d();e()}Object.keys(k).forEach(function h(n){var p=document.createDocumentFragment(),o=k[n];function m(r,q){return o[r].bool&&!o[q].bool?-1:r<q?-1:1}Object.keys(o).sort(m).forEach(function l(q){var r=o[q];if(r.bool){$(p).append($('<label class="checkbox inline span1 opt">').attr("title",r.info).html('<input type="checkbox" value="'+q+'">'+q))}else{$(p).append($('<div class="input-prepend inline opt"/>').attr("title",r.info).append($('<span class="add-on"/>').text(q)).append($('<input type="text" class="span2">').attr("data-key",q)))}});$("#opt-"+n).append($(p))});$("#tab-options .opt").tooltip({delay:{show:500,hide:100}});$("#commands").on("change",function(l){var m=a[$(l.target).val()];if(!m){$("#param").hide();$("#command-info").text("Select a command above");return}if(m.param){$("#param").attr("placeholder",m.param).show()}else{$("#param").hide()}$(".options.active").removeClass("active");["common"].concat(m.options).forEach(function(n){if(n){$("#opt-"+n).addClass("active")}});$("#command-info").text(m.info);i()});$("#param").on("input",function(l){i()});$("#tab-options").on("change",function(l){i()});$("#form").on("submit",function(m){var o,l=$("#commands").val(),n=a[l];if(!n){return}m.preventDefault();if(n.param){o=$("#param").val()||n.param}$("#output").text("running...");$('.nav-tabs a[href="#tab-output"]').click();c(l,o,f(),function(q,p){if(q){$("#image").attr("src",p).show();$("#output").hide()}else{p=(p&&JSON.stringify(p,null,2))||"";$("#image").hide();$("#output").text(p).show()}})})}());